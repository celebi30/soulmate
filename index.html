<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>–î–ª—è –î–∏–∞–Ω—ã ‚ù§Ô∏è</title>
  <style>
    :root { color-scheme: dark; }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 700px at 50% 12%, #35185c, #090911 72%),
        radial-gradient(600px 500px at 12% 92%, rgba(255,107,214,.16), transparent 58%),
        radial-gradient(600px 500px at 88% 90%, rgba(255,207,90,.12), transparent 58%);
      color:#fff;
      overflow:hidden;
      padding: 16px;
    }

    /* –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏ */
    .glow{
      position: fixed;
      inset: -45%;
      background:
        radial-gradient(circle at 25% 35%, rgba(255,107,214,.12), transparent 45%),
        radial-gradient(circle at 75% 70%, rgba(255,207,90,.09), transparent 45%);
      filter: blur(44px);
      animation: drift 10s ease-in-out infinite alternate;
      pointer-events:none;
      z-index: 0;
    }
    @keyframes drift {
      from { transform: translate(-2%, -1%) scale(1); }
      to   { transform: translate(2%, 1%) scale(1.02); }
    }

    .card{
      width:min(560px, 94vw);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(12px);
      border-radius: 22px;
      box-shadow: 0 20px 90px rgba(0,0,0,.55);
      padding: 16px;
      position: relative;
      z-index: 2;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      font-size: 13px;
      opacity:.92;
      margin-bottom: 10px;
      white-space: nowrap;
    }

    h1{
      margin: 6px 0 10px;
      font-size: 22px;
      line-height: 1.15;
      letter-spacing: .2px;
    }

    p{
      margin: 0 0 14px;
      opacity:.88;
      line-height:1.35;
      font-size: 15px;
    }

    .stage{
      position: relative;
      width: 100%;
      height: min(56vh, 460px);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      overflow: hidden;
      touch-action: none;
      display:grid;
      place-items:center;
      isolation: isolate;
    }

    .btn{
      position:absolute;
      border:0;
      border-radius: 18px;
      padding: 16px 18px;
      font-weight: 900;
      font-size: 18px;
      min-width: 140px;
      cursor:pointer;
      user-select:none;
      transition: transform .14s ease, opacity .2s ease, filter .2s ease;
    }

    #yes{
      color:#0b0b12;
      background: linear-gradient(135deg, #ff6bd6, #ffcf5a);
      box-shadow: 0 14px 34px rgba(255,107,214,.18);
    }
    #yes:active{ transform: scale(.98); }

    #no{
      color:#fff;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(6px);
    }

    .meta{
      margin-top: 10px;
      font-size: 13px;
      opacity:.78;
      display:flex;
      justify-content: space-between;
      gap:10px;
      flex-wrap: wrap;
    }

    /* ===== –§–æ–Ω–æ–≤—ã–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏ (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ) ===== */
    .bg-heart{
      position: absolute;
      left: 50%;
      top: 105%;
      font-size: 14px;
      opacity: .18;
      pointer-events:none;
      transform: translateX(-50%);
      filter: blur(0.2px);
      z-index: 0;
      will-change: transform, opacity;
    }

    /* ===== –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ ===== */
    .successWrap{
      width: 100%;
      height: 100%;
      display:grid;
      place-items:center;
      padding: 18px 14px;
      z-index: 2;
    }

    .success{
      width: min(420px, 92vw);
      text-align:center;
      animation: popIn .45s ease both;
    }

    @keyframes popIn {
      from { transform: translateY(12px) scale(.98); opacity: 0; }
      to   { transform: translateY(0) scale(1); opacity: 1; }
    }

    .success h2{
      margin: 0 0 10px;
      font-size: 26px;
      letter-spacing:.2px;
    }

    .typed{
      font-size: 18px;
      margin: 0 0 14px;
      opacity:.95;
      min-height: 52px;
    }

    .gif{
      width: min(340px, 82vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      display:block;
      margin: 0 auto;
    }

    .again{
      margin-top: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color:#fff;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
    }

    /* –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ —Å–µ—Ä–¥–µ—á–∫–∏ (–Ω–∞ —É—Å–ø–µ—Ö) */
    .heart{
      position: fixed;
      top: -24px;
      left: 50%;
      font-size: 18px;
      pointer-events:none;
      will-change: transform, opacity;
      opacity:.95;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.35));
      z-index: 999;
    }
  </style>
</head>

<body>
  <div class="glow"></div>

  <div class="card">
    <span class="badge">–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω üòå</span>
    <h1 id="title">–î–∏–∞–Ω–∞, —Ç—ã –±—É–¥–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? ‚ù§Ô∏è</h1>
    <p id="subtitle">–ù–∞–∂–∞—Ç–∏–µ ¬´–î–∞¬ª –≤—ã–∑—ã–≤–∞–µ—Ç —É–ª—ã–±–∫—É. ¬´–ù–µ—Ç¬ª –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å üôÇ</p>

    <div class="stage" id="stage">
      <!-- —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
      <button class="btn" id="yes">–î–∞</button>
      <button class="btn" id="no">–ù–µ—Ç</button>
    </div>

    <div class="meta">
      <div>–ü–æ–ø—ã—Ç–æ–∫ ¬´–ù–µ—Ç¬ª: <b id="tries">0</b></div>
      <div>–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å ¬´–ù–µ—Ç¬ª üòâ</div>
    </div>
  </div>

  <script>
    // ===== –¢–í–û–ò –¢–ï–ö–°–¢–´ + –ì–ò–§–ö–ê =====
    const SETTINGS = {
      question: "–î–∏–∞–Ω–∞, —Ç—ã –±—É–¥–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? ‚ù§Ô∏è",
      sub: "–ù–∞–∂–∞—Ç–∏–µ ¬´–î–∞¬ª –≤—ã–∑—ã–≤–∞–µ—Ç —É–ª—ã–±–∫—É. ¬´–ù–µ—Ç¬ª –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å üôÇ",
      successTitle: "–î–∏–∞–Ω–∞ ‚ù§Ô∏è",
      successText: "–¢—ã ‚Äî –º–æ–π –≤—ã–±–æ—Ä —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞ –∏ –≤—Å–µ–≥–¥–∞ ‚ù§Ô∏è",
      gifUrl: "us.jpg",
      fearRadius: 120,
      maxTries: 14
    };

    const titleEl = document.getElementById('title');
    const subEl   = document.getElementById('subtitle');
    const stage   = document.getElementById('stage');
    const yesBtn  = document.getElementById('yes');
    const noBtn   = document.getElementById('no');
    const triesEl = document.getElementById('tries');

    titleEl.textContent = SETTINGS.question;
    subEl.textContent   = SETTINGS.sub;

    let tries = 0;

    function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }

    function placeButtons(){
      const r = stage.getBoundingClientRect();
      const yR = yesBtn.getBoundingClientRect();
      const nR = noBtn.getBoundingClientRect();
      const gap = 14;

      const y = r.height - 24 - Math.max(yR.height, nR.height);
      const x0 = (r.width - (yR.width + gap + nR.width)) / 2;

      yesBtn.style.left = x0 + "px";
      yesBtn.style.top  = y + "px";

      noBtn.style.left  = (x0 + yR.width + gap) + "px";
      noBtn.style.top   = y + "px";
    }

    function growYes(){
      const s = 1 + tries * 0.11;
      yesBtn.style.transform = `scale(${Math.min(s, 2.1)})`;
      yesBtn.style.filter = `brightness(${1 + Math.min(tries*0.03, 0.35)})`;
    }

    function moveNo(fromX, fromY){
      const r = stage.getBoundingClientRect();
      const n = noBtn.getBoundingClientRect();

      const pad = 10;
      const maxX = r.width  - n.width  - pad;
      const maxY = r.height - n.height - pad;

      const curX = parseFloat(noBtn.style.left);
      const curY = parseFloat(noBtn.style.top);

      const dirX = fromX < curX + n.width/2 ? 1 : -1;
      const dirY = fromY < curY + n.height/2 ? 1 : -1;

      const x = clamp(curX + dirX * (120 + Math.random()*140), pad, maxX);
      const y = clamp(curY + dirY * (80  + Math.random()*140), pad, maxY);

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    function bumpTry(){
      tries++;
      triesEl.textContent = tries;
      growYes();

      noBtn.style.transform = `translateY(${(Math.random()*2-1)*2}px)`;
      setTimeout(()=> noBtn.style.transform = "", 120);

      if(SETTINGS.maxTries && tries >= SETTINGS.maxTries){
        renderSuccess();
      }
    }

    // ==== —Ñ–æ–Ω–æ–≤—ã–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏: —Å–æ–∑–¥–∞—ë–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ ====
    function spawnBgHeart(){
      const el = document.createElement('div');
      el.className = 'bg-heart';
      el.textContent = (Math.random() < 0.6) ? '‚ù§' : 'üíó';

      const r = stage.getBoundingClientRect();
      const x = 10 + Math.random() * (r.width - 20);
      const size = 12 + Math.random()*10;
      const dur  = 5200 + Math.random()*4200;
      const drift = (Math.random()-0.5) * 120;
      const rot = (Math.random()*140 - 70);

      el.style.left = x + "px";
      el.style.fontSize = size + "px";
      el.style.opacity = (0.10 + Math.random()*0.14).toFixed(2);

      stage.appendChild(el);

      const start = performance.now();
      function tick(t){
        const p = Math.min(1, (t-start)/dur);
        // —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö (top –æ—Ç 105% –∫ -10%)
        const y = (105 - p*120);
        el.style.transform =
          `translate(${drift*p}px, ${0}px) translateY(${y}%) rotate(${rot*p}deg)`;
        el.style.opacity = String((1-p) * parseFloat(el.style.opacity));
        if(p < 1) requestAnimationFrame(tick);
        else el.remove();
      }
      requestAnimationFrame(tick);
    }

    let bgInterval = null;
    function startBackgroundHearts(){
      if(bgInterval) return;
      // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π ‚Äú–∑–∞–ª–ø‚Äù
      for(let i=0;i<10;i++) setTimeout(spawnBgHeart, i*120);
      bgInterval = setInterval(spawnBgHeart, 260);
    }

    // ==== –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –Ω–∞ —É—Å–ø–µ—Ö ====
    function heartsBurst(count=85){
      const e = ["‚ù§Ô∏è","üíñ","üíò","üíï","üíó","üíù"];
      for(let i=0;i<count;i++){
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = e[(Math.random()*e.length)|0];

        const startX = Math.random()*window.innerWidth;
        const drift = (Math.random()-0.5)*320;
        const dur = 1400 + Math.random()*1500;
        const size = 14 + Math.random()*18;

        h.style.left = startX+"px";
        h.style.fontSize = size+"px";
        document.body.appendChild(h);

        const s = performance.now();
        (function f(t){
          const p = Math.min(1,(t-s)/dur);
          const y = -24 + p*(window.innerHeight+90);
          const rot = (Math.random()*260 - 130)*p;
          h.style.transform = `translate(${drift*p}px, ${y}px) rotate(${rot}deg)`;
          h.style.opacity = String(1-p);
          if(p<1) requestAnimationFrame(f);
          else h.remove();
        })(s);
      }
    }

    function typeInto(el, text, speed=26){
      el.textContent = "";
      let i = 0;
      const tick = () => {
        el.textContent = text.slice(0, i);
        i++;
        if(i <= text.length) setTimeout(tick, speed);
      };
      tick();
    }

    function renderSuccess(){
      // –æ—Å—Ç–∞–≤–∏–º —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏ ‚Äî –ø—É—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ª–µ—Ç–µ—Ç—å
      stage.innerHTML = `
        <div class="successWrap">
          <div class="success">
            <h2>${SETTINGS.successTitle}</h2>
            <div class="typed" id="typed"></div>
            <img class="gif" src="${SETTINGS.gifUrl}" alt="love gif">
            <button class="again" id="again">–ï—â—ë —Ä–∞–∑ üòÑ</button>
          </div>
        </div>
      `;

      // —á—Ç–æ–±—ã —Å–µ—Ä–¥–µ—á–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ –Ω–æ–≤–æ–º DOM
      bgInterval && clearInterval(bgInterval);
      bgInterval = null;
      startBackgroundHearts();

      heartsBurst(95);
      typeInto(document.getElementById('typed'), SETTINGS.successText, 24);

      document.getElementById('again').addEventListener('click', () => location.reload());
    }

    // --- –∫–Ω–æ–ø–∫–∏ ---
    yesBtn.addEventListener('click', renderSuccess);

    noBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      bumpTry();
      moveNo(Math.random()*stage.clientWidth, Math.random()*stage.clientHeight);
    });

    stage.addEventListener('pointermove', (e)=>{
      const r = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        e.clientX - (r.left + r.width/2),
        e.clientY - (r.top  + r.height/2)
      );
      if(d < SETTINGS.fearRadius){
        bumpTry();
        moveNo(e.clientX, e.clientY);
      }
    });

    stage.addEventListener('pointerdown', (e)=>{
      const r = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        e.clientX - (r.left + r.width/2),
        e.clientY - (r.top  + r.height/2)
      );
      if(d < SETTINGS.fearRadius){
        bumpTry();
        moveNo(e.clientX, e.clientY);
      }
    });

    window.addEventListener('resize', placeButtons);

    // —Å—Ç–∞—Ä—Ç
    placeButtons();
    startBackgroundHearts();
  </script>
</body>
</html>
